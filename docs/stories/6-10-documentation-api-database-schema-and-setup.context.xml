<story-context id="bmad/bmm/workflows/4-implementation/story-context/template" v="1.0">
  <metadata>
    <epicId>6</epicId>
    <storyId>10</storyId>
    <title>Documentation - API, Database Schema, and Setup</title>
    <status>drafted</status>
    <generatedAt>2026-02-20</generatedAt>
    <generator>BMAD Story Context Workflow</generator>
    <sourceStoryPath>docs/stories/6-10-documentation-api-database-schema-and-setup.md</sourceStoryPath>
  </metadata>

  <story>
    <asA>a developer or future contributor</asA>
    <iWant>clear, up-to-date documentation for the codebase</iWant>
    <soThat>I can understand how to set up, use, and extend ditto</soThat>
    <tasks>
- Task 1: Create root-level README.md (AC: 1, 4, 5)
  - 1.1 Write project overview section (what ditto is, key features: application tracking, interview management, assessment tracking, dashboard/timeline, search/export)
  - 1.2 Write tech stack summary table (backend, frontend, database, storage, testing)
  - 1.3 Write prerequisites section (Go 1.23+, Node.js 18+, PostgreSQL 15+, pnpm, AWS S3 credentials)
  - 1.4 Write quick start / local development setup instructions (backend on 8081, frontend on 8080)
  - 1.5 Write environment variables section with descriptions for both backend and frontend .env files
  - 1.6 Write "Running Tests" section (go test ./... for backend, pnpm test for frontend)
  - 1.7 Add links to detailed documentation in /docs folder
  - 1.8 Verify a new developer can follow instructions and run the project (walkthrough test)
- Task 2: Update API endpoint documentation (AC: 2, 5)
  - 2.1 Audit current docs/api-contracts-backend.md against actual codebase routes
  - 2.2 Document all auth endpoints (register, login, logout, refresh, OAuth, getMe, deleteAccount)
  - 2.3 Document application endpoints (CRUD, quick-create, status update, stats, recent, statuses)
  - 2.4 Document interview endpoints (CRUD, with-details, interviewers, questions, notes)
  - 2.5 Document assessment endpoints (CRUD, status update, submissions with file/github/notes)
  - 2.6 Document file endpoints (presigned URL, confirm upload, get, delete, storage stats)
  - 2.7 Document timeline, dashboard, notification, search, and export endpoints
  - 2.8 Include request/response JSON schemas and error response codes for each endpoint
- Task 3: Update database schema documentation (AC: 3, 5)
  - 3.1 Audit current docs/database-schema.md against actual migration files
  - 3.2 Add all tables introduced in Epics 2-5 (interviews, interviewers, interview_questions, interview_notes, assessments, assessment_submissions, files, notifications, user_notification_preferences)
  - 3.3 Document self-assessment fields added to interviews table (overall_feeling, went_well, could_improve, confidence_level)
  - 3.4 Document FTS infrastructure (search_vector columns, GIN indexes, tsvector triggers)
  - 3.5 Document performance indexes added in Epic 6 (composite indexes on user_id+status, user_id+date, etc.)
  - 3.6 Update entity relationship diagram to include all current tables
  - 3.7 Document migration history (all migrations from 000001 through current)
- Task 4: Validate and cross-reference documentation (AC: 4, 5)
  - 4.1 Verify all environment variable names match actual .env files and code references
  - 4.2 Verify API endpoint paths match actual route registrations in Go code
  - 4.3 Verify database table/column names match actual migration SQL
  - 4.4 Ensure root README links to docs/architecture.md, docs/api-contracts-backend.md, docs/database-schema.md, and other relevant docs
  - 4.5 Confirm pnpm is documented as the package manager (not npm)
    </tasks>
  </story>

  <acceptanceCriteria>
1. **Root README with project overview and setup** — A root-level README.md includes: project overview, tech stack summary (Go 1.23+/Gin, Next.js 14/React 18, PostgreSQL 15, AWS S3), local dev setup instructions (backend + frontend + database), required environment variables with descriptions, and how to run tests (go test ./... and pnpm test) (NFR-5.2)
2. **API endpoints documented with request/response schemas** — docs/api-contracts-backend.md is updated to reflect the current state of all API endpoints (auth, applications, interviews, assessments, files, timeline, dashboard, notifications, search, export) with HTTP method, path, auth requirements, request body schema, response schema, and error codes
3. **Database schema documented with current tables** — docs/database-schema.md is updated to include all current tables: original schema tables plus interviews, interviewers, interview_questions, interview_notes, assessments, assessment_submissions, files, notifications, user_notification_preferences, and all FTS/performance indexes added through Epics 1-6
4. **Setup instructions enable less than 30 minute onboarding** — Documentation provides step-by-step instructions covering: prerequisites (Go, Node.js, PostgreSQL, pnpm, AWS credentials), cloning, dependency installation, environment configuration, database migration, seeding (if applicable), starting backend (port 8081) and frontend (port 8080), and verification that the app is running
5. **All documentation lives in /docs folder** — API docs, database schema, architecture docs, and setup guide are located in the /docs folder; root README links to detailed docs in /docs
  </acceptanceCriteria>

  <artifacts>
    <docs>
      <doc>
        <path>docs/api-contracts-backend.md</path>
        <title>API Contracts - Backend</title>
        <section>Full API reference</section>
        <snippet>Generated 2025-11-08. Documents auth, companies, jobs, applications endpoints with request/response schemas. Missing Epic 2-5 endpoints (interviews, assessments, files, timeline, dashboard, notifications, search, export). Must be updated to cover all 16 route groups.</snippet>
      </doc>
      <doc>
        <path>docs/database-schema.md</path>
        <title>Database Schema</title>
        <section>Full schema reference</section>
        <snippet>Generated 2025-11-08. Documents original tables (users, users_auth, companies, jobs, applications). Missing tables from migrations 000003-000013: rate_limits, files, interviews, interviewers, interview_questions, interview_notes, assessments, assessment_submissions, notifications, user_notification_preferences, FTS vectors, performance indexes.</snippet>
      </doc>
      <doc>
        <path>docs/architecture.md</path>
        <title>Architecture Overview</title>
        <section>System architecture, project structure, technology stack</section>
        <snippet>Comprehensive architecture document with project structure, naming conventions, data architecture, API contracts overview, security, and ADRs. Reference for README tech stack section.</snippet>
      </doc>
      <doc>
        <path>docs/architecture-backend.md</path>
        <title>Backend Architecture</title>
        <section>Go backend design, layers, patterns</section>
        <snippet>Go 1.23+/Gin, sqlx, PostgreSQL 15, JWT auth, layered architecture (Handler → Repository → DB). Covers testing strategy with testutil, middleware stack, error handling patterns.</snippet>
      </doc>
      <doc>
        <path>docs/architecture-frontend.md</path>
        <title>Frontend Architecture</title>
        <section>Next.js frontend design, components, state</section>
        <snippet>Next.js 14 App Router, React 18, shadcn/ui, Tailwind CSS v4, NextAuth v5, axios with interceptors, react-hook-form + Zod validation. Covers component patterns and data fetching.</snippet>
      </doc>
      <doc>
        <path>docs/development-guide.md</path>
        <title>Development Guide</title>
        <section>Setup and workflow guide</section>
        <snippet>Existing development setup guide. Reference for README setup instructions — verify accuracy against current project state (ports, env vars, commands).</snippet>
      </doc>
      <doc>
        <path>docs/deployment-guide.md</path>
        <title>Deployment Guide</title>
        <section>Production deployment</section>
        <snippet>Production deployment instructions. Cross-reference with README for environment variable documentation and deployment patterns.</snippet>
      </doc>
      <doc>
        <path>docs/PRD.md</path>
        <title>Product Requirements Document</title>
        <section>Product requirements and features</section>
        <snippet>Full PRD defining ditto as a job application tracking system. Reference for README project overview and feature descriptions.</snippet>
      </doc>
      <doc>
        <path>docs/tech-spec-epic-6.md</path>
        <title>Epic 6 Technical Specification</title>
        <section>Story 6.10 acceptance criteria</section>
        <snippet>Authoritative source for Story 6.10 ACs. Defines documentation requirements: root README, API docs, DB schema docs, onboarding time target, docs folder structure.</snippet>
      </doc>
      <doc>
        <path>docs/epics.md</path>
        <title>Epic Overview</title>
        <section>All epics and stories</section>
        <snippet>Full epic breakdown (6 epics, 47 stories). Story 6.10 is the final story. Reference for feature coverage in documentation.</snippet>
      </doc>
      <doc>
        <path>docs/index.md</path>
        <title>Documentation Index</title>
        <section>Navigation hub</section>
        <snippet>Central documentation index linking all docs. Verify links are current and all docs are referenced.</snippet>
      </doc>
      <doc>
        <path>README.md</path>
        <title>Root README (existing)</title>
        <section>Project overview and setup</section>
        <snippet>Existing root README with project overview, tech stack, installation instructions, API usage examples. Needs audit for accuracy — may reference npm instead of pnpm, may have outdated ports or endpoints.</snippet>
      </doc>
      <doc>
        <path>backend/README.md</path>
        <title>Backend README</title>
        <section>Backend-specific documentation</section>
        <snippet>Backend features, API documentation table, request/response examples, environment variables, project structure. Well-documented but may be outdated for newer endpoints.</snippet>
      </doc>
      <doc>
        <path>CLAUDE.md</path>
        <title>Project Conventions</title>
        <section>Ports, package manager, test credentials</section>
        <snippet>Source of truth for development ports (frontend 8080, backend 8081), test credentials (newtest@example.com / testpass123), pnpm requirement.</snippet>
      </doc>
      <doc>
        <path>docs/stories/6-9-testing-infrastructure-unit-and-integration-tests.md</path>
        <title>Story 6.9 - Testing Infrastructure</title>
        <section>Dev Agent Record, testing details</section>
        <snippet>Testing infrastructure details: backend 188+ repo tests (72% coverage), 152+ handler tests, frontend 122 tests (13 suites, Jest+RTL). Known test failures: TestRateLimitRepository (DB auth), TestFileHandler_ConfirmUpload (no S3 mock).</snippet>
      </doc>
    </docs>

    <code>
      <!-- Route registration (source of truth for API endpoints) -->
      <file>
        <path>backend/cmd/server/main.go</path>
        <kind>entry-point</kind>
        <symbol>main, apiGroup</symbol>
        <lines>54-72</lines>
        <reason>Registers all 16 route groups under /api. Source of truth for which API domains exist. Also shows middleware stack (security headers, gzip, CORS, error handler).</reason>
      </file>

      <!-- All route files (source of truth for individual endpoints) -->
      <file>
        <path>backend/internal/routes/auth.go</path>
        <kind>routes</kind>
        <symbol>RegisterAuthRoutes</symbol>
        <reason>Auth endpoints: POST /api/users, /api/login, /api/refresh_token, /api/oauth (public, rate-limited); POST /api/logout, GET /api/me, DELETE /api/users/account (protected)</reason>
      </file>
      <file>
        <path>backend/internal/routes/application.go</path>
        <kind>routes</kind>
        <symbol>RegisterApplicationRoutes</symbol>
        <reason>Application endpoints: GET/POST /api/applications, GET /api/applications/with-details, /stats, /recent, /:id, /:id/with-details, PUT /:id, PATCH /:id/status, DELETE /:id, POST /quick-create, GET /api/application-statuses</reason>
      </file>
      <file>
        <path>backend/internal/routes/interview.go</path>
        <kind>routes</kind>
        <symbol>RegisterInterviewRoutes</symbol>
        <reason>Interview endpoints: POST/GET /api/interviews, GET /:id, /:id/details, /:id/with-context, PUT /:id, DELETE /:id</reason>
      </file>
      <file>
        <path>backend/internal/routes/interviewer.go</path>
        <kind>routes</kind>
        <symbol>RegisterInterviewerRoutes</symbol>
        <reason>Interviewer endpoints: POST /api/interviews/:id/interviewers, PUT/DELETE /api/interviewers/:id</reason>
      </file>
      <file>
        <path>backend/internal/routes/interview_question.go</path>
        <kind>routes</kind>
        <symbol>RegisterInterviewQuestionRoutes</symbol>
        <reason>Question endpoints: POST /api/interviews/:id/questions, PATCH /:id/questions/reorder, PUT/DELETE /api/interview-questions/:id</reason>
      </file>
      <file>
        <path>backend/internal/routes/interview_note.go</path>
        <kind>routes</kind>
        <symbol>RegisterInterviewNoteRoutes</symbol>
        <reason>Note endpoints: POST /api/interviews/:id/notes (create or update)</reason>
      </file>
      <file>
        <path>backend/internal/routes/assessment.go</path>
        <kind>routes</kind>
        <symbol>RegisterAssessmentRoutes</symbol>
        <reason>Assessment endpoints: POST/GET /api/assessments, GET /:id, /:id/details, PUT /:id, PATCH /:id/status, DELETE /:id, POST /:id/submissions; DELETE /api/assessment-submissions/:submissionId</reason>
      </file>
      <file>
        <path>backend/internal/routes/file.go</path>
        <kind>routes</kind>
        <symbol>RegisterFileRoutes</symbol>
        <reason>File endpoints: GET /api/files, POST /presigned-upload (rate-limited 50/day), /confirm-upload, GET /:id, DELETE /:id, PUT /:id/replace, POST /:id/confirm-replace; GET /api/users/storage-stats, /files</reason>
      </file>
      <file>
        <path>backend/internal/routes/dashboard.go</path>
        <kind>routes</kind>
        <symbol>RegisterDashboardRoutes</symbol>
        <reason>Dashboard endpoints: GET /api/dashboard/stats, /upcoming</reason>
      </file>
      <file>
        <path>backend/internal/routes/notification.go</path>
        <kind>routes</kind>
        <symbol>RegisterNotificationRoutes</symbol>
        <reason>Notification endpoints: GET /api/notifications, /count, PATCH /:id/read, /mark-all-read; GET/PUT /api/users/notification-preferences</reason>
      </file>
      <file>
        <path>backend/internal/routes/timeline.go</path>
        <kind>routes</kind>
        <symbol>RegisterTimelineRoutes</symbol>
        <reason>Timeline endpoints: GET /api/timeline</reason>
      </file>
      <file>
        <path>backend/internal/routes/search.go</path>
        <kind>routes</kind>
        <symbol>RegisterSearchRoutes</symbol>
        <reason>Search endpoints: GET /api/search</reason>
      </file>
      <file>
        <path>backend/internal/routes/export.go</path>
        <kind>routes</kind>
        <symbol>RegisterExportRoutes</symbol>
        <reason>Export endpoints: GET /api/export/applications, /interviews, /full</reason>
      </file>
      <file>
        <path>backend/internal/routes/company.go</path>
        <kind>routes</kind>
        <symbol>RegisterCompanyRoutes</symbol>
        <reason>Company endpoints: GET /api/companies, /autocomplete, /search, /:id, POST /select, POST (create), PUT /:id, DELETE /:id (mixed auth)</reason>
      </file>
      <file>
        <path>backend/internal/routes/job.go</path>
        <kind>routes</kind>
        <symbol>RegisterJobRoutes</symbol>
        <reason>Job endpoints: GET /api/jobs, /with-details, /:id, POST (create), PUT /:id, PATCH /:id, DELETE /:id</reason>
      </file>
      <file>
        <path>backend/internal/routes/extract.go</path>
        <kind>routes</kind>
        <symbol>RegisterExtractRoutes</symbol>
        <reason>Extract endpoint: POST /api/extract-job-url (rate-limited 30/day)</reason>
      </file>

      <!-- Migration files (source of truth for database schema) -->
      <file>
        <path>backend/migrations/000001_initial_schema.up.sql</path>
        <kind>migration</kind>
        <symbol>Initial schema</symbol>
        <reason>Core tables: users, users_auth, companies, jobs, applications, interviews (original), roles, skills, junction tables, application_status_history</reason>
      </file>
      <file>
        <path>backend/migrations/000002_add_users_auth_user_id_unique.up.sql</path>
        <kind>migration</kind>
        <symbol>Auth uniqueness constraint</symbol>
        <reason>Adds unique constraint on users_auth.user_id</reason>
      </file>
      <file>
        <path>backend/migrations/000003_create_rate_limits.up.sql</path>
        <kind>migration</kind>
        <symbol>Rate limits table</symbol>
        <reason>Creates rate_limits table for API rate limiting</reason>
      </file>
      <file>
        <path>backend/migrations/000004_create_file_system.up.sql</path>
        <kind>migration</kind>
        <symbol>File system tables</symbol>
        <reason>Creates files table for S3-backed file storage</reason>
      </file>
      <file>
        <path>backend/migrations/000005_add_job_source_fields.up.sql</path>
        <kind>migration</kind>
        <symbol>Job source fields</symbol>
        <reason>Adds source URL and extraction fields to jobs table</reason>
      </file>
      <file>
        <path>backend/migrations/000006_fix_application_status_unique.up.sql</path>
        <kind>migration</kind>
        <symbol>Application status fix</symbol>
        <reason>Fixes unique constraint on application status</reason>
      </file>
      <file>
        <path>backend/migrations/000007_create_interview_system.up.sql</path>
        <kind>migration</kind>
        <symbol>Interview system</symbol>
        <reason>Creates interviews (redesigned), interviewers, interview_questions, interview_notes tables with self-assessment fields</reason>
      </file>
      <file>
        <path>backend/migrations/000008_add_interviewers_updated_at.up.sql</path>
        <kind>migration</kind>
        <symbol>Interviewer timestamp</symbol>
        <reason>Adds updated_at column to interviewers table</reason>
      </file>
      <file>
        <path>backend/migrations/000009_create_assessment_system.up.sql</path>
        <kind>migration</kind>
        <symbol>Assessment system</symbol>
        <reason>Creates assessments and assessment_submissions tables</reason>
      </file>
      <file>
        <path>backend/migrations/000010_update_assessment_status_reviewed_to_passed_failed.up.sql</path>
        <kind>migration</kind>
        <symbol>Assessment status update</symbol>
        <reason>Changes assessment status enum from reviewed to passed/failed</reason>
      </file>
      <file>
        <path>backend/migrations/000011_create_notification_system.up.sql</path>
        <kind>migration</kind>
        <symbol>Notification system</symbol>
        <reason>Creates notifications and user_notification_preferences tables</reason>
      </file>
      <file>
        <path>backend/migrations/000012_add_search_vectors.up.sql</path>
        <kind>migration</kind>
        <symbol>FTS search vectors</symbol>
        <reason>Adds tsvector columns and GIN indexes for full-text search on applications, interviews, assessments</reason>
      </file>
      <file>
        <path>backend/migrations/000013_add_performance_indexes.up.sql</path>
        <kind>migration</kind>
        <symbol>Performance indexes</symbol>
        <reason>Adds composite performance indexes (user_id+status, user_id+date, etc.) across multiple tables</reason>
      </file>

      <!-- Handler files (needed for request/response schema documentation) -->
      <file>
        <path>backend/internal/handlers/auth.go</path>
        <kind>handler</kind>
        <symbol>AuthHandler</symbol>
        <reason>Auth handler with Register, Login, Logout, RefreshToken, OAuthLogin, GetMe, DeleteAccount — need request/response structs for API docs</reason>
      </file>
      <file>
        <path>backend/internal/handlers/application.go</path>
        <kind>handler</kind>
        <symbol>ApplicationHandler</symbol>
        <reason>Application handler with CRUD, stats, filtering — need request/response structs for API docs</reason>
      </file>
      <file>
        <path>backend/internal/handlers/interview.go</path>
        <kind>handler</kind>
        <symbol>InterviewHandler</symbol>
        <reason>Interview handler with CRUD and detail views — need request/response structs for API docs</reason>
      </file>
      <file>
        <path>backend/internal/handlers/assessment.go</path>
        <kind>handler</kind>
        <symbol>AssessmentHandler</symbol>
        <reason>Assessment handler with CRUD, status, submissions — need request/response structs for API docs</reason>
      </file>
      <file>
        <path>backend/internal/handlers/file.go</path>
        <kind>handler</kind>
        <symbol>FileHandler</symbol>
        <reason>File handler with presigned upload, confirm, replace, storage stats — need request/response structs for API docs</reason>
      </file>
      <file>
        <path>backend/internal/handlers/dashboard_handler.go</path>
        <kind>handler</kind>
        <symbol>DashboardHandler</symbol>
        <reason>Dashboard handler with stats and upcoming items — need response structs for API docs</reason>
      </file>
      <file>
        <path>backend/internal/handlers/notification_handler.go</path>
        <kind>handler</kind>
        <symbol>NotificationHandler</symbol>
        <reason>Notification handler with list, count, mark-read, preferences — need response structs for API docs</reason>
      </file>
      <file>
        <path>backend/internal/handlers/timeline_handler.go</path>
        <kind>handler</kind>
        <symbol>TimelineHandler</symbol>
        <reason>Timeline handler — need response structs for API docs</reason>
      </file>
      <file>
        <path>backend/internal/handlers/search_handler.go</path>
        <kind>handler</kind>
        <symbol>SearchHandler</symbol>
        <reason>Search handler with FTS query — need response structs for API docs</reason>
      </file>
      <file>
        <path>backend/internal/handlers/export.go</path>
        <kind>handler</kind>
        <symbol>ExportHandler</symbol>
        <reason>Export handler for CSV export — need response format for API docs</reason>
      </file>

      <!-- Environment files -->
      <file>
        <path>backend/.env</path>
        <kind>config</kind>
        <symbol>Backend environment variables</symbol>
        <reason>Source of truth for backend env vars: DB_HOST, DB_PORT, DB_USER, DB_PASSWORD, DB_NAME, DB_SSLMODE, TEST_DB_*, JWT_SECRET, JWT_REFRESH_SECRET, PORT, AWS_REGION, AWS_S3_BUCKET, AWS_ACCESS_KEY_ID, AWS_SECRET_ACCESS_KEY, AWS_ENDPOINT</reason>
      </file>
      <file>
        <path>frontend/.env.local</path>
        <kind>config</kind>
        <symbol>Frontend environment variables</symbol>
        <reason>Source of truth for frontend env vars: NEXT_PUBLIC_API_URL, AUTH_SECRET, NEXTAUTH_URL, AUTH_GITHUB_ID, AUTH_GITHUB_SECRET, AUTH_GOOGLE_ID, AUTH_GOOGLE_SECRET</reason>
      </file>

      <!-- Docker configuration -->
      <file>
        <path>docker-compose.yml</path>
        <kind>config</kind>
        <symbol>Docker Compose services</symbol>
        <reason>Defines PostgreSQL 15 service (port 5432) and Go backend service (port 8081). Reference for setup instructions.</reason>
      </file>

      <!-- Error/response patterns -->
      <file>
        <path>backend/pkg/response/response.go</path>
        <kind>utility</kind>
        <symbol>response.Success, response.Error</symbol>
        <reason>Standard response format used by all handlers — documents the JSON response envelope structure for API docs</reason>
      </file>
      <file>
        <path>backend/pkg/errors/errors.go</path>
        <kind>utility</kind>
        <symbol>AppError types</symbol>
        <reason>Error type definitions and error codes — documents the error response format for API docs</reason>
      </file>
    </code>

    <dependencies>
      <go>
        <module>ditto-backend</module>
        <goVersion>1.24.0</goVersion>
        <packages>
          <package name="github.com/gin-gonic/gin" version="v1.10.1" purpose="HTTP framework" />
          <package name="github.com/jmoiron/sqlx" version="v1.4.0" purpose="SQL extensions" />
          <package name="github.com/lib/pq" version="v1.10.9" purpose="PostgreSQL driver" />
          <package name="github.com/golang-jwt/jwt/v5" version="v5.2.2" purpose="JWT authentication" />
          <package name="github.com/golang-migrate/migrate/v4" version="v4.18.3" purpose="Database migrations" />
          <package name="github.com/aws/aws-sdk-go-v2" version="v1.41.0" purpose="AWS S3 integration" />
          <package name="github.com/go-playground/validator/v10" version="v10.26.0" purpose="Input validation" />
          <package name="github.com/gin-contrib/cors" version="v1.7.6" purpose="CORS middleware" />
          <package name="github.com/gin-contrib/gzip" version="v1.2.3" purpose="Gzip compression" />
          <package name="github.com/microcosm-cc/bluemonday" version="v1.0.27" purpose="HTML sanitization" />
          <package name="github.com/PuerkitoBio/goquery" version="v1.11.0" purpose="HTML parsing for extraction" />
          <package name="github.com/google/uuid" version="v1.6.0" purpose="UUID generation" />
          <package name="github.com/stretchr/testify" version="v1.10.0" purpose="Testing assertions" />
          <package name="golang.org/x/crypto" version="v0.44.0" purpose="Password hashing" />
          <package name="github.com/joho/godotenv" version="v1.5.1" purpose="Env file loading" />
        </packages>
      </go>
      <node>
        <packageManager>pnpm</packageManager>
        <framework>Next.js 14.2.15</framework>
        <packages>
          <package name="react" version="^18" purpose="UI library" />
          <package name="next-auth" version="5.0.0-beta.29" purpose="Authentication" />
          <package name="axios" version="^1.7.9" purpose="HTTP client" />
          <package name="react-hook-form" version="^7.54.2" purpose="Form management" />
          <package name="zod" version="^3.24.2" purpose="Schema validation" />
          <package name="@tiptap/react" version="^3.17.1" purpose="Rich text editor" />
          <package name="@tanstack/react-table" version="^8.20.5" purpose="Data tables" />
          <package name="tailwindcss" version="^4.1.10" purpose="CSS framework" />
          <package name="date-fns" version="^4.1.0" purpose="Date utilities" />
          <package name="lucide-react" version="^0.452.0" purpose="Icons" />
          <package name="sonner" version="^2.0.7" purpose="Toast notifications" />
        </packages>
        <devPackages>
          <package name="jest" version="^30.2.0" purpose="Test runner" />
          <package name="@testing-library/react" version="^16.3.2" purpose="Component testing" />
          <package name="@testing-library/jest-dom" version="^6.9.1" purpose="DOM assertions" />
          <package name="@swc/jest" version="^0.2.39" purpose="Fast TypeScript transform" />
          <package name="typescript" version="^5" purpose="Type checking" />
        </devPackages>
      </node>
    </dependencies>
  </artifacts>

  <constraints>
    <constraint type="documentation-only">This is a documentation-only story. No application code changes expected. All changes are to .md files.</constraint>
    <constraint type="source-of-truth">Actual codebase (Go route registrations, migration SQL files, .env files) takes priority over existing documentation. When docs contradict code, update docs to match code.</constraint>
    <constraint type="package-manager">Frontend uses pnpm, NOT npm. All documentation must use pnpm commands (pnpm install, pnpm test, pnpm run dev).</constraint>
    <constraint type="ports">Backend runs on port 8081, frontend runs on port 8080. All docs must reflect these actual ports.</constraint>
    <constraint type="file-locations">Root README at /README.md. All detailed docs in /docs/ folder. API docs at docs/api-contracts-backend.md. DB schema at docs/database-schema.md.</constraint>
    <constraint type="test-caveats">Backend tests: use -p 1 flag for handler tests to avoid PostgreSQL DDL concurrency issues. Known failures: TestRateLimitRepository (DB auth issue), TestFileHandler_ConfirmUpload (no S3 mock in test env).</constraint>
    <constraint type="no-secrets">Do not include actual secrets in documentation. Use placeholder values for JWT secrets, OAuth credentials, and AWS keys. Reference .env files for actual values.</constraint>
  </constraints>

  <interfaces>
    <!-- Complete API endpoint listing from route files -->
    <interface>
      <name>Auth API</name>
      <kind>REST endpoints</kind>
      <signature>POST /api/users (register), POST /api/login, POST /api/refresh_token, POST /api/oauth, POST /api/logout, GET /api/me, DELETE /api/users/account</signature>
      <path>backend/internal/routes/auth.go</path>
    </interface>
    <interface>
      <name>Application API</name>
      <kind>REST endpoints</kind>
      <signature>GET/POST /api/applications, GET /api/applications/with-details, /stats, /recent, /:id, /:id/with-details, PUT /:id, PATCH /:id/status, DELETE /:id, POST /quick-create, GET /api/application-statuses</signature>
      <path>backend/internal/routes/application.go</path>
    </interface>
    <interface>
      <name>Company API</name>
      <kind>REST endpoints</kind>
      <signature>GET /api/companies, /autocomplete, /search, /:id, POST /select, POST (create), PUT /:id, DELETE /:id</signature>
      <path>backend/internal/routes/company.go</path>
    </interface>
    <interface>
      <name>Job API</name>
      <kind>REST endpoints</kind>
      <signature>GET /api/jobs, /with-details, /:id, POST (create), PUT /:id, PATCH /:id, DELETE /:id</signature>
      <path>backend/internal/routes/job.go</path>
    </interface>
    <interface>
      <name>Extract API</name>
      <kind>REST endpoint</kind>
      <signature>POST /api/extract-job-url (rate-limited 30/day)</signature>
      <path>backend/internal/routes/extract.go</path>
    </interface>
    <interface>
      <name>Interview API</name>
      <kind>REST endpoints</kind>
      <signature>POST/GET /api/interviews, GET /:id, /:id/details, /:id/with-context, PUT /:id, DELETE /:id</signature>
      <path>backend/internal/routes/interview.go</path>
    </interface>
    <interface>
      <name>Interviewer API</name>
      <kind>REST endpoints</kind>
      <signature>POST /api/interviews/:id/interviewers, PUT/DELETE /api/interviewers/:id</signature>
      <path>backend/internal/routes/interviewer.go</path>
    </interface>
    <interface>
      <name>Interview Question API</name>
      <kind>REST endpoints</kind>
      <signature>POST /api/interviews/:id/questions, PATCH /:id/questions/reorder, PUT/DELETE /api/interview-questions/:id</signature>
      <path>backend/internal/routes/interview_question.go</path>
    </interface>
    <interface>
      <name>Interview Note API</name>
      <kind>REST endpoint</kind>
      <signature>POST /api/interviews/:id/notes (create or update)</signature>
      <path>backend/internal/routes/interview_note.go</path>
    </interface>
    <interface>
      <name>Assessment API</name>
      <kind>REST endpoints</kind>
      <signature>POST/GET /api/assessments, GET /:id, /:id/details, PUT /:id, PATCH /:id/status, DELETE /:id, POST /:id/submissions; DELETE /api/assessment-submissions/:submissionId</signature>
      <path>backend/internal/routes/assessment.go</path>
    </interface>
    <interface>
      <name>File API</name>
      <kind>REST endpoints</kind>
      <signature>GET /api/files, POST /presigned-upload (rate-limited), /confirm-upload, GET /:id, DELETE /:id, PUT /:id/replace, POST /:id/confirm-replace; GET /api/users/storage-stats, /files</signature>
      <path>backend/internal/routes/file.go</path>
    </interface>
    <interface>
      <name>Dashboard API</name>
      <kind>REST endpoints</kind>
      <signature>GET /api/dashboard/stats, /upcoming</signature>
      <path>backend/internal/routes/dashboard.go</path>
    </interface>
    <interface>
      <name>Notification API</name>
      <kind>REST endpoints</kind>
      <signature>GET /api/notifications, /count, PATCH /:id/read, /mark-all-read; GET/PUT /api/users/notification-preferences</signature>
      <path>backend/internal/routes/notification.go</path>
    </interface>
    <interface>
      <name>Timeline API</name>
      <kind>REST endpoint</kind>
      <signature>GET /api/timeline</signature>
      <path>backend/internal/routes/timeline.go</path>
    </interface>
    <interface>
      <name>Search API</name>
      <kind>REST endpoint</kind>
      <signature>GET /api/search</signature>
      <path>backend/internal/routes/search.go</path>
    </interface>
    <interface>
      <name>Export API</name>
      <kind>REST endpoints</kind>
      <signature>GET /api/export/applications, /interviews, /full</signature>
      <path>backend/internal/routes/export.go</path>
    </interface>
    <interface>
      <name>Health Check</name>
      <kind>REST endpoint</kind>
      <signature>GET /health</signature>
      <path>backend/cmd/server/main.go</path>
    </interface>
  </interfaces>

  <tests>
    <standards>This is a documentation-only story with no application code changes. Verification is done through manual review and cross-referencing: (1) API endpoint paths in docs match actual route registrations in Go code, (2) database table/column names in docs match actual migration SQL, (3) environment variable names in docs match actual .env files and code references, (4) all pnpm commands are used instead of npm. Backend tests use Go testing with testify (go test ./... -p 1). Frontend tests use Jest 30 with Testing Library (pnpm test).</standards>
    <locations>
      <location>backend/internal/handlers/*_test.go</location>
      <location>backend/internal/repository/*_test.go</location>
      <location>frontend/src/**/__tests__/*.test.tsx</location>
      <location>frontend/src/**/__tests__/*.test.ts</location>
    </locations>
    <ideas>
      <idea ac="1">Verify root README exists and contains: project overview, tech stack table, prerequisites, setup instructions, env var descriptions, test commands, links to /docs</idea>
      <idea ac="2">Cross-reference every endpoint in docs/api-contracts-backend.md against backend/internal/routes/*.go — every route file endpoint must appear in docs</idea>
      <idea ac="3">Cross-reference every table in docs/database-schema.md against backend/migrations/*.up.sql — every CREATE TABLE must appear in docs</idea>
      <idea ac="4">Walk through setup instructions from scratch — verify prerequisites list is complete, commands work, ports match (8081/8080)</idea>
      <idea ac="5">Verify all detailed docs referenced from README exist in /docs folder and links are valid</idea>
    </ideas>
  </tests>
</story-context>
